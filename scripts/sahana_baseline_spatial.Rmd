---
title: "Baseline Models"
author: "Sahana Rayan"
date: "2023-10-26"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```



# Loading libraries


```{r}
# install.packages("fixest")
library(fixest)
library(tidyverse)
```

# Loading data set

```{r}
final_data <- read_csv("../data/final_dta_data.csv")
```

# Table 4

## OLS models
OLS Industrial catch
```{r}
ols_model_ic <- feols(conflict100nmi ~ indcatch000 + 0, data = final_data)
vcov_ols_ic <- vcov_conley(ols_model_ic, , lat = "latitude",lon = "longitude", 
                           cutoff = "193mi")
summary(ols_model_ic)
vcov_ols_ic
```

OLS model with non industrial catches

```{r}
ols_model_nic <- feols(conflict100nmi ~ nidcatch000 + 0, data = final_data)
vcov_ols_nic <- vcov_conley(ols_model_nic, , lat = "latitude",lon = "longitude", 
                            cutoff = "115mi", distance = "spherical")
summary(ols_model_nic)
vcov_ols_nic
```

OLS model with total catches

```{r}
ols_model_total <- feols(conflict100nmi ~ catch000 + 0, data = final_data)
vcov_ols_total <- vcov_conley(ols_model_total, lat = "latitude",lon = "longitude", 
                              cutoff = "115mi", distance = "spherical")
summary(ols_model_total)
vcov_ols_total
```


## Pooled 2SLS models

Pooled 2SLS industrial catch
```{r}
pooled_model_ic <- feols(conflict100nmi ~ 0 | indcatch000 ~ ocean_prd, data = final_data)
vcov_pooled_ic <- vcov_conley(pooled_model_ic, , lat = "latitude",lon = "longitude", 
                           cutoff = "193mi")
summary(pooled_model_ic)
vcov_pooled_ic
```

Pooled 2SLS non industrial catch
```{r}
pooled_model_nic <- feols(conflict100nmi ~ 0 | nidcatch000 ~ ocean_prd, data = final_data)
vcov_pooled_nic <- vcov_conley(pooled_model_nic, , lat = "latitude",lon = "longitude", 
                           cutoff = "193mi")
summary(pooled_model_nic)
vcov_pooled_nic
```

Pooled 2SLS total catch
```{r}
pooled_model_total <- feols(conflict100nmi ~ 0 | catch000 ~ ocean_prd, data = final_data)
vcov_pooled_total <- vcov_conley(pooled_model_total, lat = "latitude",lon = "longitude", 
                           cutoff = "193mi")
summary(pooled_model_total)
vcov_pooled_total
```


## fixed effects model 2SLS


fixed  2SLS industrial catch
```{r}
prodummy_part_form <- paste0(paste("prodummy", 1:34, sep = ""), collapse= " + ")
fixed_model_ic <- feols(formula(paste("conflict100nmi ~ 0 + ", prodummy_part_form, 
                                       "| indcatch000 ~ ocean_prd")), 
                         data = final_data)
vcov_fixed_ic <- vcov_conley(fixed_model_ic, lat = "latitude",lon = "longitude", 
                           cutoff = "193mi")
summary(fixed_model_ic)
vcov_fixed_ic[1,1]
```


fixed  2SLS non industrial catch
```{r}
prodummy_part_form <- paste0(paste("prodummy", 1:34, sep = ""), collapse= " + ")
fixed_model_nic <- feols(formula(paste("conflict100nmi ~ 0 + ", prodummy_part_form, 
                                       "| nidcatch000 ~ ocean_prd")), 
                         data = final_data)
vcov_fixed_nic <- vcov_conley(fixed_model_nic, lat = "latitude",lon = "longitude", 
                           cutoff = "193mi")
summary(fixed_model_nic)
vcov_fixed_nic[1,1]
```

fixed  2SLS total catch
```{r}
prodummy_part_form <- paste0(paste("prodummy", 1:34, sep = ""), collapse= " + ")
fixed_model_total <- feols(formula(paste("conflict100nmi ~ 0 + ", prodummy_part_form, 
                                       "| catch000 ~ ocean_prd")), 
                         data = final_data)
vcov_fixed_total <- vcov_conley(fixed_model_total, lat = "latitude",lon = "longitude", 
                           cutoff = "193mi")
summary(fixed_model_total)
vcov_fixed_ic[1,1]
```

# Table 3 stuff

## Coeffecients
```{r}
summary(fixed_model_ic, stage = 1)
summary(fixed_model_nic, stage = 1)
summary(fixed_model_total, stage = 1)
```


## KPR stuff
All bad news bears
```{r}
fitstat(fixed_model_ic, type = "kpr")
fitstat(fixed_model_nic, type = "kpr")
fitstat(fixed_model_total, type = "kpr")
```






